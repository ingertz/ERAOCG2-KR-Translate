
@CARDNAME_79559,参照先
;ココで지정 카드의 名前、略称を返す予定
#DIMS DYNAMIC 参照先

VARSET RESULT
VARSET RESULTS

;カード制作者：xonng
SELECTCASE 参照先
	CASE "名前"
		RESULTS = 【EX유】호루스타인─엑스트라
	CASE "略称"
		RESULTS = 암소등록【EX유】
	CASE "カテゴリ"
		RESULTS:0 = 호루스
		RESULTS:1 = 호루스타인
		RESULTS:2 = E.R.A
ENDSELECT


@CARD_79559(参照先)

#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "종류"
		RETURN 通常마법
	CASE "추가日"
		RETURN 250325
ENDSELECT

RETURN 0

@CARD_EXPLANATION_79559(종류)
#DIM DYNAMIC 종류

CALL TEXT_DECORATION("ROGUE")
PRINTL 이 카드는 １턴에 １번밖에 발동할 수 없다。
PRINTL 이 카드의 ①의 효과는 듀얼 중 １번밖에 적용할 수 없으며、①의 효과로 선택한 카드는 "암소"의 등록정보로 지속마법이 된다。
CALLFORM CARD_ABLE(1,마함起動,손패起動)
PRINTL ①：패 / 덱 / EX덱에서 "호루스타인" 이외의 암컷 몬스터를 １장 선택해、그 몬스터를 지속마법카드 취급으로 자신의 마법＆함정 존에 앞면표시로 둔다。
PRINTL 그 후、덱밖에서 "【EX유】호루스타인" １장을 EX덱에 넣고、
PRINTL 자신의 EX덱 / 덱 / 패 / 몬스터 존 / 묘지에 존재하는 모든 같은이름의 카드를 "【EX유】호루스타인" 로 재정의해、EX덱에 추가한다。
PRINTL 이 효과의 처리 후、이하의 효과에서 선택한다。
PRINTL ●덱 / 묘지에서 "호루스타인" 몬스터 １장을 특수 소환한다。
PRINTL ●덱에서 "호루스타인" 카드를 １장 골라 패에 넣는다。

;SETCOLOR C_GRAY
;PRINTL (未実装)
;PRINTL ②：상대의 LPが0以下になった경우에 발동할 수 있다。
;PRINTL 묘지의 이 카드를 제외하고、이하의 효과를 적용한다。
;PRINTL ●상대의 LPが0になった경우、묘지의 "호루스타인」 카드를 제외し상대의 LPを1000に出来る。
;PRINTL ●상대는 このデュエル中、효과를 발동할 수 없다。
;RESETCOLOR
CALL TEXT_DECORATION("ROGUE")

@CARDCAN_79559(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ

;戦闘終了플래그を拾うためNEGATE前に記載
IF 종류 == 永攻紋章起動 && (자신_듀얼패배플래그 > 0 || 상대_듀얼패배플래그 > 0 )
	RETURN 1
ENDIF

CALL CARD_NEGATE(듀얼리스트,종류,ゾーン,場所,79559)
SIF RESULT == 1
	RETURN 0

IF 종류 == 마함起動 || 종류 == 손패起動
	SIF 발동済_D1(듀얼리스트,79559) 
		RETURN 0
	SIF 발동済_1(듀얼리스트,79559) 
		RETURN 0
	IF 종류 == 마함起動
		SIF GETVAR(@"%듀얼리스트%_魔_表:場所") == 1
			RETURN 0
	ENDIF
	SIF メインフェイズ != 1
		RETURN 0
	SIF ターンプレイヤー != 듀얼리스트
		RETURN 0
	SIF 마함数(듀얼리스트) >= 5
		RETURN 0
		
	CALL FULLRESET
	효과範囲손패 = 1
	효과範囲덱 = 1
	효과範囲EX덱 = 1
	효과条件성별 = 牝性
	효과条件固カテゴリ = 호루스타인
	
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ELSEIF 종류 == 永紋章起動
	RETURN 1
ELSEIF 종류 == 永攻紋章起動
	RETURN 1
ENDIF

@CARDEFFECT_79559(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC 対面者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 選択カードID
#DIM DYNAMIC 参照カードID
#DIM DYNAMIC 書換先カードID
#DIM DYNAMIC 所有者
#DIM DYNAMIC 参照場所
#DIM DYNAMIC 암소대상
#DIM DYNAMIC 암소所有
#DIMS DYNAMIC 암소名称
#DIMS DYNAMIC 암소略称
#DIM DYNAMIC 암소속성
#DIM DYNAMIC 암소攻撃力
#DIM DYNAMIC 암소守備力
#DIM DYNAMIC 암소乳サイズ
#DIM DYNAMIC 암소ミルクml
#DIM DYNAMIC 암소ミルク売却額
#DIM DYNAMIC 条件달성
#DIMS DYNAMIC カテゴリ名称
#DIM DYNAMIC 암소守備표시数
CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%

書換先カードID = 179559
カテゴリ名称 = 登録情報：호루스타인─EX유

IF 종류 == 마함起動 || 종류 == 손패起動
	;カード발동
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,79559,1)
	IF RESULT == 0 && 마함数(듀얼리스트) < 5
		
		CALL FULLRESET
		효과範囲손패 = 1
		효과範囲덱 = 1
		효과範囲EX덱 = 1
		효과条件성별 = 牝性
		효과条件固カテゴリ = 호루스타인
		효과추가カテ = %カテゴリ名称%
		CALL CARD_SET_ADV(듀얼리스트,ゾーン,場所,"表側표시",)
		
		選択カードID = RESULT:1
		IF RESULT != 0
			;마함に置く(デュエル中１번)
			CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,79559,20)
			
			;호루스타인情報の취득(カードIDから各種情報を취득)
			CALL HORUSTEIN_GET_DATA(듀얼리스트,-1,書換先カードID)
			암소名称 = %RESULTS:0%
			암소略称 = %RESULTS:1%
			参照場所 = RESULT:0
			암소대상 = RESULT:1
			参照カードID = RESULT:99
			CALL HORUSTEIN_GET_BUST(参照カードID)
			암소乳サイズ = RESULT:2
			
			;耐性と발동無効の付与
			CALL SET_FIELD_INFO(듀얼리스트,"마함",参照場所,"破耐",2)
			CALL SET_FIELD_INFO(듀얼리스트,"마함",参照場所,"対耐",2)
			CALL SET_FIELD_INFO(듀얼리스트,"마함",参照場所,"発無",2)
			
			;---패에 加わった等の표시をスキップ
			SKIPDISP 1
			
			;EX덱에 行く
			;書き換え前の 카드를 一旦패에 넣는다。
			CALL CARD_GENERATE_HAND(듀얼리스트,選択カードID)
			
			; 카드의 書き換え
			;필드의 카드
			FOR カウンタ,0,5
				SIF GETVAR(@"%듀얼리스트%_MZ_ID:カウンタ") != 選択カードID
					CONTINUE
				CALL CARD_RECONSTRUCT(듀얼리스트,"필드",カウンタ,書換先カードID)
				CALL CARD_ADD(듀얼리스트, "필드", "EX덱",カウンタ)
			NEXT
			
			;패의 カード
			FOR カウンタ,0,現손패(듀얼리스트)
				SIF GETVAR(@"%듀얼리스트%_손패:カウンタ") != 選択カードID
					CONTINUE
				CALL CARD_RECONSTRUCT(듀얼리스트,"손패",カウンタ,書換先カードID)
				CALL CARD_ADD(듀얼리스트, "손패", "EX덱",カウンタ)
			NEXT
			
			;덱のカード
			FOR カウンタ,0,現山札数(듀얼리스트)
				SIF GETVAR(@"%듀얼리스트%_덱:カウンタ") != 選択カードID
					CONTINUE
				CALL CARD_RECONSTRUCT(듀얼리스트,"덱",カウンタ,書換先カードID)
				CALL CARD_ADD(듀얼리스트, "덱", "EX덱",カウンタ)
			NEXT
			
			;묘지의 카드
			FOR カウンタ,0,現묘지数(듀얼리스트)
				SIF GETVAR(@"%듀얼리스트%_묘지:カウンタ") != 選択カードID
					CONTINUE
				CALL CARD_RECONSTRUCT(듀얼리스트,"묘지",カウンタ,書換先カードID)
				CALL CARD_ADD(듀얼리스트, "묘지", "EX덱",カウンタ)
			NEXT
			
			;EX덱のカード
			FOR カウンタ,0,現EX山札数(듀얼리스트)
				SIF GETVAR(@"%듀얼리스트%_EX덱:カウンタ") != 選択カードID
					CONTINUE
				CALL CARD_RECONSTRUCT(듀얼리스트,"EX덱",カウンタ,書換先カードID)
			NEXT
			;---スキップここまで
			SKIPDISP 0
			
			PRINTFORMW 등록증에 이름이 새겨지니、어디선가 호루스의 수호자가 나타났다！
			PRINTFORML %암소名称%는 저항할 새도없이 세명의 수호자에게 밀려져、
			PRINTFORML 피어스에 카우벨이 붙은 목걸이가 채워지고、몸에 관리태그가 찍혀버렸다…
			PRINTFORML 
			PRINTFORML 「…음멋！…음머엇！？」
			PRINTFORMW 
			PRINTFORML %암소名称%는 목소리를 냈지만、그 소리는 암소의 울음소리로밖에 들리지 않았다。
			PRINTFORML …어떻게든 저항하려 하고있는것 이겠지。하지만 몸은 이미 암소가 되어버린것인지、아양떠는듯한 울음소리밖에 낼수없게된것같다…
			PRINTFORMW 무언가를 항의하는 %암소名称%를 무시하고、수호자는 그 튼튼한 손으로 가슴을 받치기 시작했다…
			SETCOLOR C_PINK
			PRINTFORML 
			PRINTFORML 「음머-…！？…음멋❤」「음머엇❤ 음머❤」
			PRINTFORMW 
			RESETCOLOR
			PRINTFORML …수호자에게 가슴이 받쳐진것으로、그 가슴은 "상응하는 가슴"으로 바뀌어간다…
			PRINTFORML 
			IF 암소乳サイズ >= 4
				;魔乳 이상의 경우、1サイズ올린다
				
				PRINTFORM %암소名称%의 가슴은
				SETCOLOR C_PINK
				PRINTFORM  [%GET_TALENTNAME(121,암소乳サイズ)%] 
				RESETCOLOR
				PRINTFORM 에서
				SETCOLOR C_H_PINK
				PRINTFORM  [%GET_TALENTNAME(121,암소乳サイズ+1)%] 
				RESETCOLOR
				PRINTFORML 가 되어버렸다…
				PRINTFORMW
				
				;着替え
				PRINTFORMW %암소名称%는 너무 큰 자신의 가슴을 확인하니、그 가슴을 해방하는듯이 옷을 벗기 시작했다…
			ELSE
				;魔乳未満の경우、規格外にする
				PRINTFORM %암소名称%의 가슴은
				SETCOLOR C_PINK
				PRINTFORM  [%GET_TALENTNAME(121,암소乳サイズ)%] 
				RESETCOLOR
				PRINTFORM 에서
				SETCOLOR C_H_PINK
				PRINTFORM  [%GET_TALENTNAME(121,5)%] 
				RESETCOLOR
				PRINTFORML 가 되어버렸다…
				PRINTFORMW
				
				;着替え
				PRINTFORML 수호자는 %암소名称%의 한번에 커져버린 가슴을 놓치는듯이 옷을 벗겨주기 시작했다…
				PRINTFORMW %암소名称%는 몸의 중심이 바뀌어버린 영향인지、걷기 힘들어보인다…
			ENDIF
			
			PRINTFORML 
			PRINTFORML %암소名称%는 발밑에 준비되어있던 옷을 주…우려 했지만、가슴이 너무 커서 줍지 못했다…
			PRINTFORML 수호자는 %암소名称%를 둘러싸고、발밑에 있던 소묘양 비키니로 갈아입혔다…
			
			;服装の변경(牛柄ビキニと角)
			IF 암소대상 != -1 
				;악세사리&모자：つけ角 大(2枠目を변경)
				EQUIP:암소대상:2 = 21
				CFLAG:암소대상:(200 + 2) = 21
				;신발、양말は触らない
				;바지～이너までは全剥き
				FOR カウンタ,6,13
					EQUIP:암소대상:カウンタ = 0
					CFLAG:암소대상:(200 + カウンタ) = 0
				NEXT
				;원피스：牛柄ビキニ
				EQUIP:암소대상:15 = 33
				CFLAG:암소대상:(200 + 15) = 33
				
				;조교
				CALL EROTIC_MOVE("バスト조교",암소대상,-1,300)
			ENDIF
			
			PRINTFORML 
				
			CALL FULLRESET
			효과範囲덱 = 1
			효과範囲묘지 = 1
			효과条件カテゴリ = 호루스타인
			효과条件종류 = モン全般
			CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
			
			IF RESULT == 1
				PRINTFORML [1] - 덱 / 묘지에서 "호루스타인" 몬스터를 특수 소환한다。
			ELSE
				SETCOLOR C_GRAY
				PRINTFORML     - 덱 / 묘지에서 "호루스타인" 몬스터를 특수 소환한다。
				RESETCOLOR
			ENDIF
			
			CALL FULLRESET
			효과範囲덱 = 1
			효과条件カテゴリ = 호루스타인
			CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
			
			IF RESULT == 1
				PRINTFORML [2] - 덱에서 "호루스타인" 카드를 패에 넣는다。
			ELSE
				SETCOLOR C_GRAY
				PRINTFORML     - 덱에서 "호루스타인" 카드를 패에 넣는다。
				RESETCOLOR
				PRINTFORML
				PRINTFORML [0] - 패에 넣을 카드가 존재하지 않습니다。
			ENDIF
			
			BINPUT
			
			IF RESULT == 1
				;덱 / 묘지에서 "호루스타인" 몬스터를 특수 소환한다
				CALL FULLRESET
				효과範囲덱 = 1
				효과範囲묘지 = 1
				효과条件カテゴリ = 호루스타인
				CALL CARD_SP_SUMMON_ADV(듀얼리스트,ゾーン,場所)
				
				IF RESULT != -1
					選択カードID = RESULT:1
					CALL HORUSTEIN_GET_DATA(듀얼리스트,カード소환先,選択カードID)
					;◆小さな가슴でも違和感のない描写にする
					SELECTCASE 選択カードID
					CASE 179556
						;미유
						PRINTFORMW %RESULTS:0%의 아름다운 가슴이 탄력있게 흔들렸다…
						CALL HORUSTEIN_RAND_COW_TXT(1,0)
					CASE 179557
						;애유
						PRINTFORMW %RESULTS:0%의 귀여운 유두가 탱글하고 흔들렸다…
						CALL HORUSTEIN_RAND_COW_TXT(1,1)
					CASE 179558
						;지유
						PRINTFORMW %RESULTS:0%의 무의식적으로 빨고싶어지는 가슴은 촉촉해 요염해져있다…
						CALL HORUSTEIN_RAND_COW_TXT(1,2)
					ENDSELECT
				ENDIF
				PRINTFORMW 
			ELSEIF RESULT == 2
				;덱에서 "호루스타인」 카드를 패에 넣는다
				CALL FULLRESET
				효과範囲덱 = 1
				효과条件カテゴリ = 호루스타인
				CALL CARD_ADD_ADV(듀얼리스트,ゾーン,場所)
			ENDIF
			
			PRINTFORML 
			;永紋章の표시をスキップ
			SKIPDISP 1
			CALL CARD_RESERV(듀얼리스트,79559,永紋章予約)
			CALL CARD_RESERV(듀얼리스트,79559,永攻紋章予約)
			SKIPDISP 0
			SETCOLOR C_YELLOW
			PRINTFORML "【EX유】호루스타인"은 필드에 존재하는 경우「%암소名称%」로 취급됩니다。
			RESETCOLOR
			PRINTFORMW
			
			IF 암소乳サイズ < 5
				;規格外未満なら最低限として規格外にする
				암소乳サイズ = 5 -(암소乳サイズ)
			ELSE
				;規格外なら+1する
				암소乳サイズ = 1
			ENDIF
			;EX유は카운터を規格外以上になるように調整してスタ-ト(乳サイズ：UP)
			CALL SET_FIELD_INFO(듀얼리스트,"마함",参照場所,"個Ｃ",암소乳サイズ)
		ELSE
			PRINTFORMW 마법＆함정 존에 카드를 두지 못했기 때문에、등록할수 없었습니다…
		ENDIF
		
	ENDIF
	
	SKIPDISP 1
	CALL CARD_DISPOSE(듀얼리스트,ゾーン,場所)
	SKIPDISP 0
	
ELSEIF 종류 == 永紋章起動 || 종류 == 永攻紋章起動
	;紋章を使用し、패 / 필드의 암소の情報を書き換え
	CALL FULLRESET
	CALL HORUSTEIN_GET_DATA(듀얼리스트,,179559)
	암소名称 = %RESULTS:0%
	암소略称 = %RESULTS:1%
	参照場所 = RESULT:0
	암소대상 = RESULT:1
	암소所有 = RESULT:2
	암소ミルクml = RESULT:4		;착유量(듀얼中総量)
	参照カードID = RESULT:99
	암소乳サイズ = GETVAR(@"%듀얼리스트%_魔_個Ｃ:参照場所")
	
	;参照先카드가 吹っ飛んでたら処理しない
	IF 参照場所 != -1
		
		IF 듀얼리스트 == "자신"
			所有者 = 1
		ELSEIF 듀얼리스트 == "상대"
			所有者 = 2
		ENDIF
		
		;속성
		TRYCALLFORM CARD_{参照カードID},"속성"
		암소속성 = RESULT
		
		;生成した카드가 효과를 발동하면、こちらの攻守は読み込まないようにする
		IF !발동済_1(듀얼리스트,179559) 
			TRYCALLFORM CARD_{参照カードID},"攻撃力"
			암소攻撃力 = RESULT
			TRYCALLFORM CARD_{参照カードID},"守備力"
			암소守備力 = RESULT
		ENDIF
		;자신 필드의 카드で、所有者が자신
		FOR カウンタ,0,5
			SIF GETVAR(@"%듀얼리스트%_MZ_ID:カウンタ") != 書換先カードID
				CONTINUE
			SIF GETVAR(@"%듀얼리스트%_MZ_所有:カウンタ") != 所有者
				CONTINUE

			IF 종류 == 永紋章起動 
				CALL CARD_SET_RENAME(듀얼리스트,"필드",カウンタ,암소略称)
				CALL STATCHANGE_EFFECT(듀얼리스트,"자신",カウンタ,"変化元ID",参照カードID)
			ELSEIF 종류 == 永攻紋章起動 
				
				CALL STATCHANGE_OTHER(듀얼리스트,"자신",カウンタ,"属",암소속성)
				CALL STATCHANGE_BASIC(듀얼리스트,"자신",カウンタ,암소攻撃力,암소守備力)
				CALL CARD_SET_CATEGORY(듀얼리스트,"필드",カウンタ,"E.R.A")
				;カテゴリ2は未설정なら변경する
				SIF GETVARS(@"%듀얼리스트%_MZ_追カテ2:カウンタ") == ""
					CALL CARD_SET_CATEGORY(듀얼리스트,"필드",カウンタ,"호루스타인",1)
				
				;지속마법扱いの자신に乗ってる카운터의 수 만큼 乳を盛る
				CALL STATCHANGE_OTHER(듀얼리스트,"자신",カウンタ,"가슴追",암소乳サイズ)
			ENDIF
		NEXT
		
		;상대 필드의 카드で、所有者が자신
		FOR カウンタ,0,5
			SIF GETVAR(@"%対面者%_MZ_ID:カウンタ") != 書換先カードID
				CONTINUE
			SIF GETVAR(@"%対面者%_MZ_所有:カウンタ") != 所有者
				CONTINUE

			IF 종류 == 永紋章起動 
				CALL CARD_SET_RENAME(対面者,"필드",カウンタ,암소略称)
				CALL STATCHANGE_EFFECT(対面者,"자신",カウンタ,"変化元ID",参照カードID)
			ELSEIF 종류 == 永攻紋章起動 
				
				CALL STATCHANGE_OTHER(対面者,"자신",カウンタ,"属",암소속성)
				CALL STATCHANGE_BASIC(対面者,"자신",カウンタ,암소攻撃力,암소守備力)
				CALL CARD_SET_CATEGORY(対面者,"필드",カウンタ,"E.R.A")
				;カテゴリ2は未설정なら변경する
				SIF GETVARS(@"%対面者%_MZ_追カテ2:カウンタ") == ""
					CALL CARD_SET_CATEGORY(対面者,"필드",カウンタ,"호루스타인",1)
				
				CALL STATCHANGE_OTHER(対面者,"자신",カウンタ,"가슴追",암소乳サイズ)
			ENDIF
		NEXT
	ENDIF
	
	IF (자신_듀얼패배플래그 > 0 || 상대_듀얼패배플래그 > 0) && 암소ミルクml > 0
		
		FOR カウンタ,0,5
			SIF GETVAR(@"%듀얼리스트%_필드:{カウンタ}") == -1
				CONTINUE
			SIF GETVAR(@"%듀얼리스트%_MZ_ID:{カウンタ}") != 179559
				CONTINUE
			;필드에 암소EXが존재한다면 、そちらの지속処理でミルクの買取を行う
			;(攻守を参照して乳の大きさが変動するため。ここは攻守の変動を処理する場所なので処理前の値が入ったりする…)
			
			;(NEGATE前に拾うはずなので、효과無効状態でもなんとかなるはず)
			参照カードID = -1
			BREAK
		NEXT

		IF 参照カードID != -1
			CALL HORUSTEIN_GET_BUST(参照カードID,암소乳サイズ)
			암소乳サイズ = RESULT:2
			암소ミルク売却額 = 암소ミルクml *10
			
			CUSTOMDRAWLINE —
			PRINTFORML
			;EX유は何もしなくてもたくさん搾れるので価格が抑えめ
			TIMES 암소ミルク売却額 , 0.15
		
			SETCOLOR C_H_PINK
			PRINTFORM [%GET_TALENTNAME(121,암소乳サイズ)%] 
			RESETCOLOR
			PRINTFORML 의 젖은 판매가 어려운듯 하다…
			PRINTFORML %암소名称%에게서 뽑은{암소ミルクml}ml의 우유를{암소ミルク売却額}엔에 판매했다…
			PRINTFORML
			CUSTOMDRAWLINE —
			
			CALL MONEY_GET(암소ミルク売却額)

				
			;リセットも兼ねて、ミルクの情報を削除
			CALL SET_FIELD_INFO(듀얼리스트,"마함",参照場所,"T1汎数",0,上書きモード)
			CALL SET_FIELD_INFO(듀얼리스트,"마함",参照場所,"汎数",0,上書きモード)
		ENDIF
	ENDIF
ENDIF


;ここから암소のカード処理-----

@CARDNAME_179559,参照先
;ココで지정 카드의 名前、略称を返す予定
#DIMS DYNAMIC カード名
#DIMS DYNAMIC 参照先
#DIM DYNAMIC カウンタ
#DIM DYNAMIC カードID
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "名前"
			RESULTS = 【EX유】호루스타인
	CASE "略称"
			RESULTS = 【EX유】암소
	CASE "カテゴリ"
		RESULTS:0 = 호루스
		RESULTS:1 = 호루스타인
		RESULTS:2 = E.R.A
ENDSELECT


@CARD_179559(参照先)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC 参照先
#DIMS DYNAMIC 参照先チェック
#DIM DYNAMIC カウンタ
#DIM DYNAMIC カードID
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "종류"
		RETURN 링크
	CASE "속성"
		;두아무테프と同じ
		RETURN 물속성
	CASE "종족"
		RETURN 야수족
	CASE "レベル"
		RETURN 3
	CASE "攻撃力"
		RETURN 0
	CASE "守備力"
		RETURN 0
	CASE "성별"
		RETURN 牝性
ENDSELECT

RETURN 0

@CARDSUMMON_179559(듀얼리스트,소환カード,EX参照)
#DIMS DYNAMIC 듀얼리스트
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 소환カード
#DIM DYNAMIC EX参照
;素材条件

CALL RESETCONDITION_MAT
必要링크数 = 3
素材条件カテゴリ = 호루스타인

IF EX参照 == 1
	CALL LINCAN(듀얼리스트,소환カード,179559) 
	RETURN RESULT
ENDIF

@CARD_EXPLANATION_179559(종류)
#DIM DYNAMIC 종류

PRINTL "호루스타인" 몬스터 ３장
PRINTL 이 카드의 ③의 효과는 １턴에 １번밖에 사용할 수 없다。
PRINTL ①：L소환성공시에 발동할 수 있다。묘지에서 "호루스타인" 몬스터를 ２장까지 골라、수비표시로 특수 소환한다。
PRINTL 이 효과로 특수 소환한 몬스터는、이 턴 소재로 할 수 없다。
PRINTL ②：자신 메인 페이즈에 발동할 수 있다。이 카드의 젖을 계측한다。
;CALLFORM CARD_ABLE(0,필드起動)
PRINTL ③：배틀 페이즈에 발동할 수 있다。이 카드의 젖을 뽑아 발정시킨다。
PRINTL 그 후、이하의 효과를 적용한다。
PRINTL ●이 카드의 공격력 / 수비력은 필드의 "호루스타인" 몬스터의 공격력 / 수비력의 합계와 같은 수치가 된다。
PRINTL ●이 카드는 필드의 수비표시인 "호루스타인" 몬스터의 수 만큼 공격할 수 있다。
CALLFORM CARD_ABLE(1,효과後誘発)
PRINTL ④：발정한 이 카드의 공격이 중단된 경우엔 발동할 수 있다。
PRINTL 공격 대상인 몬스터를 "호루스타인"카드로 취급해、수비표시가 된다。이후、그 몬스터는 공격 대상이 되지 않는다。
PRINTL （이 효과가 적용된 몬스터밖에 필드에 존재하지 않는 상태에서의 공격은 직접공격이 된다。）

@CARDCAN_179559(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIMS DYNAMIC 対面者
#DIM DYNAMIC 別途カードID

CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%


;戦闘終了플래그を拾うため
IF 종류 == 지속효과 && (자신_듀얼패배플래그 > 0 || 상대_듀얼패배플래그 > 0)
	SIF ゾーン != "필드"
		RETURN 0
	RETURN 1
ENDIF

CALL CARD_NEGATE(듀얼리스트,종류,ゾーン,場所,179559)
SIF RESULT == 1
	RETURN 0

IF 종류 == EX소환時
	;묘지에 호루스타인が居なければ使えない
	CALL FULLRESET
	효과範囲묘지 = 1
	효과条件カテゴリ = 호루스타인
	효과条件소환可 = 1
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ELSEIF 종류 == 필드起動
	SIF GETVARS(@"%듀얼리스트%_フィールド名") != "밀크 팜"
		RETURN 0
	IF メインフェイズ == 1
		SIF ターンプレイヤー == "상대" ;ただ情報を표시するだけなので、NPCは使用しない(ターン1付けてないから多分連打するし…)
			RETURN 0
	ELSEIF バトルフェイズ == 1
		SIF 발동済_1(듀얼리스트,179559) 
			RETURN 0
	ENDIF
	
	RETURN 1
ELSEIF 종류 == 攻撃後強制誘発;本当は밀크 팜なきゃダメだけど、ただ致すだけだし良いか…
	SIF ゾーン != "필드"
		RETURN 0
	SIF ターンプレイヤー != 듀얼리스트
		RETURN 0
	SIF GETVAR(@"%듀얼리스트%_戦闘カード") != 場所
		RETURN 0
	SIF GETVAR(@"%듀얼리스트%_MZ_発情:場所") == 0
		RETURN 0
	SIF GETVAR(@"%듀얼리스트%_攻撃無効_保") != 1
		RETURN 0
	RETURN 1
ELSEIF 종류 == 효과後誘発
	SIF GETVARS(@"%듀얼리스트%_フィールド名") != "밀크 팜"
		RETURN 0
	;発情時に攻撃中断された場合
	SIF ゾーン != "필드"
		RETURN 0
	SIF ターンプレイヤー != 듀얼리스트
		RETURN 0
	SIF GETVAR(@"%듀얼리스트%_戦闘カード") != 場所
		RETURN 0
	SIF GETVAR(@"%듀얼리스트%_MZ_発情:場所") == 0
		RETURN 0	
	SIF GETVAR(@"%듀얼리스트%_攻撃無効") != 1
		RETURN 0
	RETURN 1
ELSEIF 종류 == 攻守変動 || 종류 == リアクション효과
	SIF ゾーン != "필드"
		RETURN 0

	RETURN 1
ELSEIF 종류 == 효과後強制誘発
	SIF ゾーン != "필드"
		RETURN 0
	;守備표시の場合
	SIF GETVAR(@"%듀얼리스트%_MZ_表:場所") == 1 
		RETURN 0
	;자신이 특수状態：ドリップ(99554)の場合
	SIF GETVAR(@"%듀얼리스트%_MZ_특수状態:場所") != 99554
		RETURN 0
	
	CALL FULLRESET
	효과条件固カテゴリ = 호루스타인
	CALL CARD_CHECK_FIN_DATA(듀얼리스트,"효과발동")
	SIF RESULT == 1
		RETURN 1
	
	CALL FULLRESET
	효과条件固カテゴリ = 호루스타인
	CALL CARD_CHECK_FIN_DATA(対面者,"효과발동")
	SIF RESULT == 1
		RETURN 1
	
	RETURN 0
ENDIF

@CARDEFFECT_179559(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC 対面者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC 選択カードID
#DIM DYNAMIC 参照カードID
#DIM DYNAMIC 書換先カードID
#DIM DYNAMIC 参照場所
#DIM DYNAMIC 암소대상
#DIMS DYNAMIC 암소名称
#DIM DYNAMIC 攻撃대상
#DIM DYNAMIC 攻撃대상カードID
#DIMS DYNAMIC 상대名称
#DIMS DYNAMIC 搾手名称
#DIM DYNAMIC 搾手
#DIM DYNAMIC 절정횟수
#DIM DYNAMIC カウンタ
#DIMS DYNAMIC カテゴリ名称
#DIM DYNAMIC 現乳サイズ
#DIM DYNAMIC T1ミルクml
#DIM DYNAMIC ミルクml
#DIM DYNAMIC 암소攻撃力
#DIM DYNAMIC 암소守備力
#DIM DYNAMIC 암소守備표시数
#DIM DYNAMIC ステ合計
#DIM DYNAMIC 암소ミルク売却額

CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%

書換先カードID = 179559
カテゴリ名称 = 登録情報：호루스타인─EX유

SIF (場所 < 0 || 場所 >= 5) && (자신_듀얼패배플래그 > 0 || 상대_듀얼패배플래그 > 0)
	PRINTFORML 장소{場所} ;HORUSTEIN_GET_DATA에서、지속효과으로 에러。밀크 정산시에 떨어질때가 있음。(아마도 해결됨。만약을위해 남겨둠)

;호루스타인情報の취득
CALL HORUSTEIN_GET_DATA(듀얼리스트,場所,179559)
암소名称 = %RESULTS:0%
参照場所 = RESULT:0
암소대상 = RESULT:1
T1ミルクml = RESULT:3	;착유量(1ターン中)
ミルクml = RESULT:4		;착유量(듀얼中総量)
参照カードID = RESULT:99

;乳サイズ취득
CALL HORUSTEIN_GET_BUST(参照カードID,GETVAR(@"%듀얼리스트%_MZ_가슴追:場所"))
現乳サイズ = RESULT:2 

;実行者によって文章の상대を切り替える
IF 듀얼리스트 == "자신"
	搾手名称 = %CALLNAME:MASTER%
	搾手 = MASTER
ELSE
	;대상상대
	CALL CARD_EROTICS(상대プレイヤー,듀얼리스트)
	IF RESULT != -1
		搾手名称 = %CALLNAME:RESULT%
	ELSE
		搾手名称 = "대상者"
	ENDIF
	搾手 = RESULT
ENDIF

;공격 대상의 名前を취득
IF 종류 == 攻撃後強制誘発 || 종류 == 효과後誘発
	공격 대상 = 戦闘場所(対面者)
	;名称の설정
	IF 攻撃대상 == 99
		CALL CARD_EROTICS(상대プレイヤー,듀얼리스트)
		IF RESULT != -1
			상대名称 = %CALLNAME:RESULT%
		ELSE
			상대名称 = "대상상대"
		ENDIF
	ELSE
		攻撃대상カードID = GETVAR(@"%対面者%_MZ_ID:공격 대상")
		TRYCALLFORM CARDNAME_{攻撃대상カードID},"略称"
		상대名称 = %RESULTS%
	ENDIF
ENDIF

IF 종류 == EX소환時
	;カード발동確認
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,99554,1)
	IF RESULT == 0
		;묘지에서 "호루스타인」2장을 수비 표시로 특수소환(素材불가)
		
		FOR カウンタ,0,2
			CALL FULLRESET
			효과範囲묘지 = 1
			효과条件カテゴリ = 호루스타인
			효과추가종류 = 21	;素材불가
			CALL CARD_SP_SUMMON_ADV(듀얼리스트,ゾーン,場所,"守備표시")
			
			IF RESULT != -1
				選択カードID = RESULT:1
				CALL HORUSTEIN_GET_DATA(듀얼리스트,カード소환先,選択カードID)
				;◆小さな가슴でも違和感のない描写にする
				SELECTCASE 選択カードID
				CASE 179556
					;미유
					PRINTFORML %RESULTS:0%의 아름다운 가슴이 탄력있게 흔들렸다…
					CALL HORUSTEIN_RAND_COW_TXT(1,0)
				CASE 179557
					;애유
					PRINTFORML %RESULTS:0%의 귀여운 유두가 탱글하고 흔들렸다…
					CALL HORUSTEIN_RAND_COW_TXT(1,1)
				CASE 179558
					;지유
					PRINTFORML %RESULTS:0%의 무의식적으로 빨고싶어지는 가슴은 촉촉해 요염해져있다…
					CALL HORUSTEIN_RAND_COW_TXT(1,2)
				ENDSELECT
				
				ステ合計 = 0
				ステ合計 += GETVAR(@"%듀얼리스트%_MZ_攻:カード소환先")
				ステ合計 += GETVAR(@"%듀얼리스트%_MZ_守:カード소환先")
				
				CUSTOMDRAWLINE —
				PRINTFORML 
				PRINTFORML %RESULTS:0%는 %암소名称%의 너무 큰 가슴을 받치고있다…
				IF ステ合計 / 1000 > 0
					SETCOLOR C_PINK
					PRINTFORML (%암소名称%의 가슴 사이즈가 {ステ合計 / 1000}랭크 Up)
					RESETCOLOR
				ENDIF
				PRINTFORML 
				CUSTOMDRAWLINE —
				PRINTFORML
				CALL SET_FIELD_INFO(듀얼리스트,"필드",カード소환先,"リ数",1)
				CALL SET_FIELD_INFO(듀얼리스트,"필드",カード소환先,"表固",1)
			ENDIF
		NEXT
		PRINTFORMW 
	ENDIF
ELSEIF 종류 == 필드起動 && メインフェイズ == 1
	;ステータス표시させるだけなので、無効にさせない
	효과無効不能 = 1
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,書換先カードID)
	IF RESULT == 0 && 参照カードID != -1
		
		PRINTFORML 
		PRINTFORMW 호루스의 종자들이 %암소名称%를 둘러싸고있다…
		
		;名前から가슴のサイズの変動まで표시
		CALL HORUSTEIN_PRINT_STATE(듀얼리스트,場所,179559, GETVAR(@"%듀얼리스트%_MZ_가슴追:場所"))
		
		
	ENDIF
ELSEIF 종류 == 필드起動 && バトルフェイズ == 1
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,書換先カードID,1)
	
	IF RESULT == 0 && 参照カードID != -1
		;가슴を搾る
		IF GETVAR(@"%듀얼리스트%_MZ_個Ｃ:場所") == 0
			;1回目
			PRINTFORML %搾手名称%는 %암소名称%의 젖에 손을 뻗으니、그 유륜이 변하지 않도록 손가락을 움직인다…
			PRINTFORMW 살에서 젖으로 변화해가는 감촉을 즐기면서、서서히 그 중심부로 짜내는듯한 움직임으로 가슴을 의식시킨다。
			PRINTFORM %암소名称%에게서
			SETCOLOR C_PINK
			PRINTFORM 「음머-…❤」
			RESETCOLOR
			PRINTFORML 하는 소리가 흐를때엔、%암소名称%의 젖은 우뚝솟아、그 끝부분은 뽑아줬으면 하는듯이 요염해보인다…
			PRINTFORML %搾手名称%는 꾸욱하고 손가락으로 짜내니、%암소名称%는 기쁜듯이 하얀 액체를 흘렸다…
			SETCOLOR C_PINK
			PRINTFORMW 「음멋❤ 응앗❤ ―…❤」
			RESETCOLOR
			IF 암소대상 != -1
				CALL EROTIC_MOVE("バスト조교",암소대상,搾手,300)
			ENDIF
			
			CALL STATCHANGE_EFFECT(듀얼리스트,"자신",場所,"発情",175)
			CALL SET_FIELD_INFO(듀얼리스트,"필드",場所,"個Ｃ",1,上書きモード)
		ELSE
			;2回目
			PRINTFORML %搾手名称%는 %암소名称%의 젖에 다시 손을 뻗으니、그 젖에 의해 하얀게 젖은 손가락을 움직인다…
			PRINTFORML 이미 한번 짜냈는데도、손가락이 닿은것 만으로도 뾰족해진 끝부분은 뚝뚝 하몃 젖어버리고있다…
			SETCOLOR C_PINK
			PRINTFORML 「음머-…❤ 음머-…❤」
			RESETCOLOR
			PRINTFORMW 상냥하게 쓰다듬는듯한 자극으론 부족한것인지、%암소名称%는 %搾手名称%의 손에 가슴을 밀어붙이기 시작했다…
			PRINTFORML 
			PRINTFORML %搾手名称%는 기대를 배신하는것처럼 정중하게 상냥하게 만지니、끝부분을 착하고 튕기며、고양된 성감을 한번에 해방시켰다！
			PRINTFORML %암소名称%의 젖은 갑작스러운 자극에 버티지 못하고、무너진 수도꼭지처럼 하얀 액체를 흘리고있다…
			SETCOLOR C_PINK
			PRINTFORMW 「…앗！？ 오오옷～～～❤❤」
			RESETCOLOR
			IF 암소대상 != -1
				CALL EROTIC_MOVE("バスト조교",암소대상,搾手,300)
			ENDIF
			
			CALL STATCHANGE_EFFECT(듀얼리스트,"자신",場所,"発情",185)
			CALL SET_FIELD_INFO(듀얼리스트,"필드",場所,"個Ｃ",0,上書きモード)
		ENDIF
		
		;효과破壊の適用は발동済2で판정
		
		CALL HORUSTEIN_GET_MILK(듀얼리스트,参照カードID,GETVAR(@"%듀얼리스트%_MZ_가슴追:場所"))
		
		;発情
		SETCOLOR C_PINK
		PRINTFORML 
		PRINTFORML %암소名称%는 젖을 짜낸 영향인지、심하게 발정하고있다…
		PRINTFORML
		RESETCOLOR

		IF ターンプレイヤー != 듀얼리스트
			;상대 턴에 발동한 場合
			PRINTFORML %암소名称%는 젖을 짜여진 여운에 잠겨있다…

			;2回、うるさい鳴き
			CALL HORUSTEIN_RAND_COW_TXT(2,3)
		ENDIF
		
		PRINTFORMW
	ENDIF

ELSEIF 종류 == 攻撃後強制誘発
	;発情時に攻撃が中断された場合
	
	;ひとりえっち(ここは一回触ってるので短めに。효과処理もあるしね)
	PRINTFORML …발정한 %암소名称%는 %상대名称%에게 흔들흔들하며 가까이 가지만、시선을 발밑으로 향하니 도중에 다리를 멈춰버렸다。
	PRINTFORML 후우후우 하며 거친 호흡을 하는 %암소名称%는、자신의 젖에서 눈을 떼지 못하고있다…
	PRINTFORMW %암소名称%는 %搾手名称%에게 짜여진 기억을 기억해내는듯이、젖을 천천히 문지르기 시작했다…
	
	;1回、うるさい鳴き
	CALL HORUSTEIN_RAND_COW_TXT(1,3)
	
	IF 암소대상 != -1
		CALL EROTIC_MOVE("バスト조교",암소대상,-1,500)
	ENDIF
	절정횟수 += RESULT:1
	IF 절정횟수 > 0
		PRINTFORML %암소名称%는 {절정횟수}번 절정한것같다。
		PRINTFORMW 여운이 기분좋았던것인지、%암소名称%의 주변엔 작고 하얀 반점이 흩날리고있다…
	ENDIF
	
	PRINTFORML 
ELSEIF 종류 == 효과後誘発
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,書換先カードID)
	
	IF RESULT == 0
		IF 攻撃대상 == 5 
			;直接攻撃失敗時
			;再び手を伸ばすと、상대 필드에 他に戦闘を行える 몬스터가 いない為か、タガが外れたように…
			
			PRINTFORMW %암소名称%는 상대 필드에 전투를 할 수 있는 몬스터가 없는것을 확인하고、더욱깊은 쾌락을 탐구해 손가락을 움직이기 시작했다…
			절정횟수 += 2
			SETCOLOR C_PINK
			
			;암소の鳴き声を鳴らす
			CALL HORUSTEIN_RAND_COW_TXT(절정횟수,3)
			
			IF 암소대상 != -1
				REPEAT 절정횟수
					CALL EROTIC_MOVE("バスト조교",암소대상,-1,200)
				REND
			ENDIF
			
			RESETCOLOR
			PRINTFORML 울음소리가 끝나니、%암소名称%는 "철퍽" 하는 소리를 내며 하얀 물웅덩이에 쓰러졌다…
			PRINTFORMW 마음껏 기분 좋아진 %암소名称%는、만족한것같은 미소를 띄우고있다…
			;절정後の암소鳴き声
			CALL HORUSTEIN_RAND_COW_TXT(3,3)
			PRINTFORMW 
		ELSE
			;モンスター攻撃時に失敗
			PRINTFORML %상대名称%는 발정한 %암소名称%의 가슴에 짓눌렸따！
			PRINTFORM %암소名称%는
			SETCOLOR C_PINK
			;EX유
			PRINTFORM 「음머어어❤」
			RESETCOLOR
			
			PRINTFORML 하며 울고、규격외로 너무 커다란 가슴으로、그대로 %상대名称%을 끼워버렸다！
			PRINTFORMW 짓이겨지지 않으려고 %상대名称%는、너무 커다란 그 가슴을 "들어올려"버렸다…
			PRINTFORML 
			PRINTFORMW %상대名称%는 짓눌리지 않으려 %암소名称%의 가슴을 받치고있다…
			
			;守備표시にして、공격 대상から外れる
			CALL SET_FIELD_INFO(対面者,"필드",攻撃대상,"攻避",2)
			CALL SET_FIELD_INFO(対面者,"필드",攻撃대상,"表",2,上書きモード)
			CALL CARD_SET_CATEGORY(対面者,"필드",攻撃대상,"호루스타인")

			ステ合計 += GETVAR(@"%対面者%_MZ_攻:공격 대상")
			ステ合計 += GETVAR(@"%対面者%_MZ_守:공격 대상")
			ステ合計 /= 1000
			
			;攻守の합계가 1000毎に乳サイズ1UP
			IF ステ合計 > 0
				PRINTFORM %암소名称%의 가슴은 더욱 커진것같다…
				SETCOLOR C_PINK
				PRINTFORMW ({ステ合計}랭크 Up)
				RESETCOLOR
				CALL HORUSTEIN_PRINT_STATE(듀얼리스트,場所,書換先カードID, 現乳サイズ+ステ合計,2,1);2乳上書き(比較なし)、1画像アイコンのみ
				
				PRINTFORML 
				;サイズアップ分鳴く、うるさい鳴き
				CALL HORUSTEIN_RAND_COW_TXT(ステ合計,3)
				PRINTFORMW 
			ENDIF
		ENDIF
		
	ENDIF
ELSEIF 종류 == 攻守変動
	
	;攻守の합계가 1000毎に乳サイズ1UP
	CALL HORUSTEIN_GET_EX_SUM(듀얼리스트)
	IF RESULT > 0
		;要確認★
		CALL STATCHANGE_OTHER(듀얼리스트,"자신",場所,"가슴追",GETVAR(@"%듀얼리스트%_MZ_가슴追:場所")+RESULT)
	ENDIF
	
	;효과使用済みなら処理をする
	;●이 카드의 공격력은 필드의 「호루스타인」 몬스터의 공격력の合計と同じ値になる。
	;●이 카드는 필드의 守備표시の「호루스타인」 몬스터의 수まで攻撃할 수 있다。
	
	IF 발동済_1(듀얼리스트,179559) 
		
		;EX유の攻守は필드의 合計の値になる
		FOR カウンタ,0,5
			;자신의 카드チェック
			;カードIDなし、もしくは자신자신은 제외한다
			SIF GETVAR(@"%듀얼리스트%_MZ_ID:カウンタ") == -1 || GETVAR(@"%듀얼리스트%_MZ_ID:カウンタ") == 179559
				CONTINUE
			;필드의 호루스타인は全て추가カテゴリで付与してるので、以下で취득할 수 있다。
			SIF !(GETVARS(@"%듀얼리스트%_MZ_追カテ:カウンタ") == "호루스타인" || GETVARS(@"%듀얼리스트%_MZ_追カテ2:カウンタ") == "호루스타인")
				CONTINUE
			
			암소攻撃力 += GETVAR(@"%듀얼리스트%_MZ_攻:カウンタ")
			암소守備力 += GETVAR(@"%듀얼리스트%_MZ_守:カウンタ")
			
			;守備표시の 카드를 参照する
			SIF GETVAR(@"%듀얼리스트%_MZ_表:カウンタ") == 1 
				CONTINUE
			
			암소守備표시数 += 1
		NEXT
		
		FOR カウンタ,0,5
			;상대의 카드チェック
			;カードIDなし、もしくは자신자신은 제외한다
			SIF GETVAR(@"%対面者%_MZ_ID:カウンタ") == -1 || GETVAR(@"%対面者%_MZ_ID:カウンタ") == 179559
				CONTINUE
			;필드의 호루스타인は全て추가カテゴリで付与してるので、以下で취득할 수 있다。
			SIF !(GETVARS(@"%対面者%_MZ_追カテ:カウンタ") == "호루스타인" || GETVARS(@"%対面者%_MZ_追カテ2:カウンタ") == "호루스타인")
				CONTINUE
			
			암소攻撃力 += GETVAR(@"%対面者%_MZ_攻:カウンタ")
			암소守備力 += GETVAR(@"%対面者%_MZ_守:カウンタ")
			
			;守備표시の 카드를 参照する
			SIF GETVAR(@"%対面者%_MZ_表:カウンタ") == 1 
				CONTINUE
			암소守備표시数 += 1
		NEXT
		
		CALL STATCHANGE_BASIC(듀얼리스트,"자신",場所,암소攻撃力,암소守備力)
		CALL STATCHANGE_EFFECT(듀얼리스트,"자신",場所,"追戦",암소守備표시数-1)
	ENDIF
ELSEIF 종류 == 지속효과

	IF (자신_듀얼패배플래그 > 0 || 상대_듀얼패배플래그 > 0) && ミルクml > 0
			
		;자신 필드에 암소EXが居れば、필드의 攻守も参照する
		
		암소ミルク売却額 = ミルクml *10
		
		CUSTOMDRAWLINE —
		PRINTFORML
		;EX유は何もしなくてもたくさん搾れるので価格が抑えめ
		TIMES 암소ミルク売却額 , 0.15
	
		SETCOLOR C_H_PINK
		PRINTFORM [%GET_TALENTNAME(121,現乳サイズ)%] 
		RESETCOLOR
		PRINTFORML 의 젖은 판매가 어려운듯 하다…
		PRINTFORML %암소名称%에게서 짜낸{ミルクml}ml의 우유를 {암소ミルク売却額}엔에 판매했다…
		PRINTFORML
		CUSTOMDRAWLINE —
		
		CALL MONEY_GET(암소ミルク売却額)

		
		;リセットも兼ねて、ミルクの情報を削除
		CALL SET_FIELD_INFO(듀얼리스트,"마함",参照場所,"T1汎数",0,上書きモード)
		CALL SET_FIELD_INFO(듀얼리스트,"마함",参照場所,"汎数",0,上書きモード)
	ENDIF
ELSEIF 종류 == リアクション효과

	FOR カウンタ,0,5
		SIF GETVAR(@"%듀얼리스트%_필드:カウンタ") == -1 || GETVAR(@"%듀얼리스트%_MZ_ID:カウンタ") == 179559
			CONTINUE
		SIF GETVAR(@"%듀얼리스트%_MZ_リ数:カウンタ") >= 1
			CONTINUE
		;필드의 호루스타인は全て추가カテゴリで付与してるので、以下で취득할 수 있다。
		SIF !(GETVARS(@"%듀얼리스트%_MZ_追カテ:カウンタ") == "호루스타인" || GETVARS(@"%듀얼리스트%_MZ_追カテ2:カウンタ") == "호루스타인")
			CONTINUE
		;守備표시の 카드를 参照する
		SIF GETVAR(@"%듀얼리스트%_MZ_表:カウンタ") == 1 
			CONTINUE
		
		CALL HORUSTEIN_GET_DATA(듀얼리스트,カウンタ,GETVAR(@"%듀얼리스트%_MZ_ID:カウンタ"))
		상대名称 = %RESULTS:0%
		
		ステ合計 = 0
		ステ合計 += GETVAR(@"%듀얼리스트%_MZ_攻:カウンタ")
		ステ合計 += GETVAR(@"%듀얼리스트%_MZ_守:カウンタ")
		
		CUSTOMDRAWLINE —
		PRINTFORML 
		PRINTFORML %상대名称%는 %암소名称%의 너무 커다란 가슴을 받치고있다…
		SETCOLOR C_PINK
		PRINTFORML (%암소名称%의 가슴 사이즈가 {ステ合計 / 1000}랭크 Up)
		RESETCOLOR
		PRINTFORML 
		CUSTOMDRAWLINE —
		PRINTFORML
		CALL SET_FIELD_INFO(듀얼리스트,"필드",カウンタ,"リ数",1)
		CALL SET_FIELD_INFO(듀얼리스트,"필드",カウンタ,"表固",1)
	NEXT
	
	FOR カウンタ,0,5
		SIF GETVAR(@"%対面者%_필드:カウンタ") == -1 || GETVAR(@"%対面者%_MZ_ID:カウンタ") == 179559
			CONTINUE
		SIF GETVAR(@"%対面者%_MZ_リ数:カウンタ") >= 1
			CONTINUE
		;필드의 호루스타인は全て추가カテゴリで付与してるので、以下で취득할 수 있다。
		SIF !(GETVARS(@"%対面者%_MZ_追カテ:カウンタ") == "호루스타인" || GETVARS(@"%対面者%_MZ_追カテ2:カウンタ") == "호루스타인")
			CONTINUE
		;守備표시の 카드를 参照する
		SIF GETVAR(@"%対面者%_MZ_表:カウンタ") == 1 
			CONTINUE
		
		CALL HORUSTEIN_GET_DATA(対面者,カウンタ,GETVAR(@"%対面者%_MZ_ID:カウンタ"))
		상대名称 = %RESULTS:0%
		
		ステ合計 = 0
		ステ合計 += GETVAR(@"%対面者%_MZ_攻:カウンタ")
		ステ合計 += GETVAR(@"%対面者%_MZ_守:カウンタ")
		
		CUSTOMDRAWLINE —
		PRINTFORML 
		PRINTFORML %상대名称%는 %암소名称%의 너무 커다란 가슴을 받치고있다…
		SETCOLOR C_PINK
		PRINTFORML (%암소名称%의 가슴 사이즈가 {ステ合計 / 1000}랭크 Up)
		RESETCOLOR
		PRINTFORML 
		CUSTOMDRAWLINE —
		PRINTFORML 
		CALL SET_FIELD_INFO(対面者,"필드",カウンタ,"リ数",1)
		CALL SET_FIELD_INFO(対面者,"필드",カウンタ,"表固",1)
	NEXT
	
ELSEIF 종류 == 효과後強制誘発
	;ドリップ状態(守備표시時、호루스타인 이외의 카드가 발동する度に搾られる)
	
	SETCOLOR C_PINK
	CUSTOMDRAWLINE —
	PRINTFORML
	PRINTFORML %암소名称%는 드립장치에 연결되어있다…
	PRINTFORML 
	CUSTOMDRAWLINE —
	RESETCOLOR
	
	PRINTFORML
	PRINTFORML %암소名称%의 가슴에 붙여진 장치가 희미하게 진동하여、흘러떨어진것이 밀크서버에 쌓여간다…
	PRINTFORML
	
	;1回、うるさい鳴き、短め鳴き
	CALL HORUSTEIN_RAND_COW_TXT(1,3,10)
	PRINTFORML 
	
	;착유する(通常よりも少量)
	CALL HORUSTEIN_GET_MILK(듀얼리스트,参照カードID,GETVAR(@"%듀얼리스트%_MZ_가슴追:場所")-5)
	PRINTFORML 
	
	;乳を吸ってLP回復
	CALL LIFE_CHANGE(듀얼리스트,"増加","효과",100)
ENDIF

