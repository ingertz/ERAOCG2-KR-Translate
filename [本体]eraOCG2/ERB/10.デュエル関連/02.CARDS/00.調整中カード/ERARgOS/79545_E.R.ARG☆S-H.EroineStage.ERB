@CARDNAME_79545,参照先
;ココで지정카드의 名前、略称を返す予定
#DIMS DYNAMIC 参照先

VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "名前"
		RESULTS = E.R.ARG☆S─H.EronineStage
		;Ｈでエロいねステージ。
	CASE "略称"
		RESULTS = 히로인 스테이지
	CASE "カテゴリ"
		RESULTS:0 = ARG☆S
		;RESULTS:1 = HERO
		RESULTS:2 = E.R.A
ENDSELECT


@CARD_79545(参照先)

#DIMS DYNAMIC 参照先
VARSET RESULT
VARSET RESULTS

SELECTCASE 参照先
	CASE "종류"
		RETURN フィールド
ENDSELECT
RETURN 0

@CARD_EXPLANATION_79545(종류)
#DIM DYNAMIC 종류

CALL TEXT_DECORATION("ROGUE")
PRINTL 이 카드명의 ②④의 효과는 각각 1턴에 1번밖에 사용할 수 없다.
CALLFORM CARD_ABLE(0,지속효과)
PRINTL ①: 자신 필드는 "H.EronineStage"가 되고,
PRINTL 자신 필드의 몬스터의 공격력・수비력은, 이 카드의 볼티지 카운터의 수× 100 상승한다.
;볼티지카운터が5つ以上ある場合、자신 필드의 마함の「ARG☆S」は接触可能になる（こっそり）
CALLFORM CARD_ABLE(1,마함起動)
PRINTL ②: 자신 메인 페이즈에 1000LP를 지불하고 발동할 수 있다.
PRINTL 자신의 덱 / 묘지 / 제외 상태의 암컷의 "ARG☆S" 카드 1장을 패에 넣는다.
PRINTL 이 효과로 덱에서 패에 넣었을 경우, 자신의 패를 1장 고르고 제외한다.
CALLFORM CARD_ABLE(0,발동強制誘発)
PRINTL ③: "E.R.ARG☆S－H.EronineStage" 이외의 카드의 효과가 발동될 때마다 발동한다.
PRINTL 이 카드에 볼티지 카운터를 1개 놓는다 (최대 10개까지).
CALLFORM CARD_ABLE(2,효과後強制誘発)
PRINTL ④: 이 카드에 놓인 볼티지 카운터의 수가 10개가 되었을 경우에 발동한다.
PRINTL 이 카드를 묘지로 보냄으로써, 자신의 덱 / 묘지 / 제외 상태의 "ARG☆S" 마법 카드 또는
PRINTL 자신을 몬스터로서 특수 소환하는 효과를 가진 지속 함정 카드 1장을 자신 필드에 세트할 수 있다.
PRINTL 이 효과로, 원래 주인에게 [친애] 또는 [굴복 완료]의 "ARG☆S" 지속 함정 카드를 세트했을 경우, 세트한 턴에도 발동할 수 있다.
;こ의 효과でセットする際に、選択したモンスターにエロ조교を施す（陥落している지속함정ARG☆Sなら、Ｈパワーで即발동が可能になる）
CALL TEXT_DECORATION("ROGUE")


;ARG☆Sで活躍している「BBS」の代わりに使えるE.R.A마법カード。英雄達の殿堂で行われる輝かしきライブ 스테이지의 イメージ。
;카운터を貯める발동強制誘発を、アドラ始動でチェーン不可になった지속함정의 효과발동だけ特別に対応したが、효과後強制誘発で無理矢理に実装している。
;BBSも作れると思うが、汎用カードなら他のチェーン不可状態も考える必要があり頭が痛い。チェーン不可（자신의 효과발동はブロックしない）が必要か？

;ウ○娘が競争の後にライブするのと比べて、こっちは初動でこれ貼ってから試合開始するの逆じゃない？　という気がかりなところはあるが、
;「NEMEAN」では神々に奉納する歌と踊りの의식（ラグビーABのハカ的な？）をしてからスポーツの試合をするという解釈でいこう。
;まあ試合後も歌と踊りはするし、なんなら開会式でも歌と踊りはするし、後夜祭でも当然の権利として歌と踊りはするに違いない。
;ギリシャそういう楽しいことはたくさんやったほうが得だと考えてた節があるからお祭りだらけなんだよね～、と心の中のシ○ン先生もおっしゃってる。

;フィールド마법であるため元々のホームスタジアムとは共存できないが、向こうからサルベージ可能かつこちらからも一応サーチ可能。
;シンプルに起動효과でアドラをサーチする마법として使えるし、上振れ時には제외한다ことで제외条件を能動的に満たすことも할 수 있다。
;エロ효과は「ARG☆S」ERA카드의 共通효과的にする感じにして、「あなた」監督に媚びることで試合に出られるという構図。
;はじめは嫌々だけど試合に出るために仕方なく行っていた性行為だったのに、馴らされていくことで身も心も「あなた」監督の말하는대로になる。
;そういうふうに女の子をじっくりと躾けていくのって、まさにThe조교SLGって感じがして「いい」んだよね。少女が見たeraの原風景。
;------------------------------------------------------------------------------------------------
;（$500で조교したい캐릭터の카드를 買ってください）
;（お金があまればほかのアイテムも買いましょう）


@CARDCAN_79545(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC カウンタ
#DIM DYNAMIC 条件달성
#DIM DYNAMIC EX条件달성
#DIMS DYNAMIC 対面者

CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%

CALL CARD_NEGATE(듀얼리스트,종류,ゾーン,場所,79545)
SIF RESULT == 1
	RETURN 0


IF 종류 == 마함起動 && GETVAR(@"%듀얼리스트%_魔_表:場所") == 1
	;SIF 효과발동済(듀얼리스트,場所,ゾーン)
	;	RETURN 0
	SIF 발동済_1(듀얼리스트,79545)
		RETURN 0
	SIF メインフェイズ != 1
		RETURN 0
	SIF ターンプレイヤー != 듀얼리스트
		RETURN 0
	SIF GETVAR(@"ライフ_%듀얼리스트%") <= 1000
		RETURN 0
	CALL FULLRESET
	효과範囲덱 = 1
	효과範囲묘지 = 1
	효과範囲제외 = 1
효과条件カテゴリ = ARG☆S
	효과条件성별 = 牝性
	CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
	SIF RESULT != 1
		RETURN 0
	RETURN 1
ELSEIF 종류 == 마함起動 || 종류 == 손패起動
	SIF メインフェイズ != 1
		RETURN 0
	SIF ターンプレイヤー != 듀얼리스트
		RETURN 0
	RETURN 1
ELSEIF 종류 == 발동強制誘発
	SIF ゾーン != "마함"
		RETURN 0
	SIF GETVAR(@"%듀얼리스트%_魔_表:場所") >= 2
		RETURN 0
	CALL FULLRESET
효과条件固名前 = E.R.ARG☆S─H.EronineStage
	;CALL CARD_CHECK_START_DATA_2(듀얼리스트,2)
	CALL CARD_CHECK_START_DATA(듀얼리스트,2)
	SIF RESULT != 1
		RETURN 0
	SIF GETVAR(@"%듀얼리스트%_魔_個Ｃ:場所") >= 10
		RETURN 0
	RETURN 1
ELSEIF 종류 == 효과後強制誘発
	SIF 발동済_2(듀얼리스트,79545)
		RETURN 0
	SIF ゾーン != "마함"
		RETURN 0
	;ここで지속함정チェーン不可かつ지속함정발동後だと特別にRETURN1を返す処理を入れて、효과後強制誘発でカウンタ乗せる処理をする。
	IF GETVAR(@"%듀얼리스트%_永함정阻害") >= 1 && GETVAR(@"%듀얼리스트%_魔_個Ｃ:場所") < 10
		;RETURN 1
		CALL FULLRESET
		효과条件종류 = 지속함정
		CALL CARD_CHECK_FIN_DATA(듀얼리스트,"효과발동",0)
		SIF RESULT == 1
			RETURN 1
	ENDIF
	SIF GETVAR(@"%듀얼리스트%_魔_表:場所") >= 2
		RETURN 0
	SIF GETVAR(@"%듀얼리스트%_魔_個Ｃ:場所") < 10
		RETURN 0
	;後の処理でキャンセルした際の汎数でチェックして、２回目以降は발동しないように설정
	;이 카드의 動きとして、10になった瞬間だけ묘지に送って효과適用の機会がある。
	SIF GETVAR(@"%듀얼리스트%_魔_汎数:場所")  == 1
		RETURN 0
	RETURN 1
ELSEIF 종류 == 攻守変動 || 종류 == 지속효과
	SIF ゾーン != "마함"
		RETURN 0
	SIF GETVAR(@"%듀얼리스트%_魔_表:場所") >= 2
		RETURN 0
	RETURN 1
ENDIF

@CARDEFFECT_79545(듀얼리스트,종류,ゾーン,場所)
#DIMS DYNAMIC 듀얼리스트
#DIMS DYNAMIC 対面者
#DIMS DYNAMIC ゾーン
#DIM DYNAMIC 종류
#DIM DYNAMIC 場所
#DIM DYNAMIC 参照カードID
#DIM DYNAMIC 캐릭터番号
#DIM DYNAMIC 제외参照カードID
#DIM DYNAMIC 素質チェック
#DIM DYNAMIC カード추가先
#DIM DYNAMIC アルゴ確認
#DIM DYNAMIC 山札枚数＿前
#DIM DYNAMIC 山札枚数＿後
#DIM DYNAMIC 選択結果
#DIM DYNAMIC 攻撃力修正


CALL 対面者판정(듀얼리스트)
対面者 = %RESULTS%

IF 종류 == 마함起動 && GETVAR(@"%듀얼리스트%_魔_表:場所") == 1
	CALL CARD_CHOICE(듀얼리스트,종류,"마함",場所,79545,1)
	IF RESULT == 0
		CALL LIFE_CHANGE(듀얼리스트,"減少","コスト",1000)
		;덱の枚数を보존。サーチ処理後に確認して変動あった（＝덱에서 サーチしてた）ら손패１장제외한다処理を추가で行う。
		山札枚数＿前 = 現山札数(듀얼리스트)
		CALL FULLRESET
		효과範囲덱 = 1
		효과範囲묘지 = 1
		효과範囲제외 = 1
효과条件カテゴリ = ARG☆S
		효과条件성별 = 牝性
		CALL CARD_ADD_ADV(듀얼리스트,ゾーン,場所)
		IF RESULT == 1
			参照カードID = RESULT:1
			;덱에서 손패に加えた場合
			山札枚数＿後 = 現山札数(듀얼리스트)
			IF 山札枚数＿前 != 山札枚数＿後
				;山札枚数が変わったので、패를 １장제외한다。
				CALL FULLRESET
				효과範囲손패 = 1
				효과条件行先플래그 = 제외行き
				CALL CARD_ADD_GY_ADV(듀얼리스트,ゾーン,場所)
				제외参照カードID = RESULT:1
			ENDIF
		ENDIF
	ENDIF
ELSEIF 종류 == 마함起動 || 종류 == 손패起動
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,79545)
	IF RESULT == 0
		CALL CARD_DISPOSE(듀얼리스트,ゾーン,場所,마함行き)
	ENDIF
ELSEIF 종류 == 발동強制誘発
	CALL FULLRESET
	CALL SET_FIELD_INFO(듀얼리스트,"마함",場所,"個Ｃ",1)
	PRINTFORML 카드 효과의 발동에 의해 스테이지의 볼티지가 오르고 있다！
	PRINTFORMW （현재의 볼티지카운터{GETVAR(@"%듀얼리스트%_魔_個Ｃ:場所")}개）
	PRINTFORML 
ELSEIF 종류 == 효과後強制誘発
	;ここの部分で、アドラで지속チェーン不可状態の時に발동した지속함정の볼티지카운터を増やす処理を入れる。
	IF GETVAR(@"%듀얼리스트%_魔_個Ｃ:場所") < 10
		CALL FULLRESET
		효과条件종류 = 지속함정
		CALL CARD_CHECK_FIN_DATA(듀얼리스트,"효과발동",0)
		SIF RESULT != 1
			RETURN 0
		CALL FULLRESET
		CALL SET_FIELD_INFO(듀얼리스트,"마함",場所,"個Ｃ",1)
		PRINTFORML 카드 효과의 발동에 의해 스테이지의 볼티지가 오르고 있다！
		PRINTFORMW （현재의 볼티지카운터{GETVAR(@"%듀얼리스트%_魔_個Ｃ:場所")}개）
		PRINTFORML 
		RETURN 0
	ENDIF
	
	;ここから先が本来의 효과後強制誘発の処理
	CALL CARD_CHOICE(듀얼리스트,종류,ゾーン,場所,79545,2)
	IF RESULT == 0
		;こちら의 효과適用の際に一応該当카드가 あるかを確認（普通はどこかに対応するカードあると思うが）
		CALL FULLRESET
		효과範囲덱 = 1
		효과範囲묘지 = 1
		효과範囲제외 = 1
		효과条件分割 = 分割在り
		효과条件종류 = 지속함정
		효과条件スーパーカテゴリ = ARG☆S
		효과条件スーパー종류 = 마법全般
		CALL CARD_CHECK_ADV(듀얼리스트,종류,ゾーン,場所)
		IF RESULT != 1
			選択結果 = いいえ
		;효과를 使うか選択（CPUは必ず使う）
		ELSEIF 듀얼리스트 == "상대"
			選択結果 = はい
		ELSE
			CUSTOMDRAWLINE —
			SETCOLOR C_YELLOW
			PRINTL 볼티지 카운터가 10개 쌓인 「E.R.ARG☆S─H.EronineStage」를 묘지로 보내고,
			PRINTL 자신을 몬스터로서 특수 소환 가능한 지속 함정 카드를 세트하는 효과를 사용하시겠습니까?
			RESETCOLOR
			CUSTOMDRAWLINE —
			CALL YN_CHOICE(듀얼리스트)
			選択結果 = RESULT
		ENDIF
		
		IF 選択結果 == はい
			;묘지へ送って효과를 使用する。
			CALL CARD_DISPOSE(듀얼리스트,ゾーン,場所)
			
			;実際のセット処理の直前に現마함の情報を拾ってくることで、その後に추가される位置を取得している
			カード추가先 = 現마함(듀얼리스트)
			CALL FULLRESET
			효과範囲덱 = 1
			효과範囲묘지 = 1
			효과範囲제외 = 1
			효과条件分割 = 分割在り
			효과条件종류 = 지속함정
			효과条件スーパーカテゴリ = ARG☆S
			효과条件スーパー종류 = 마법全般
			CALL CARD_SET_ADV(듀얼리스트,ゾーン,場所,"裏側표시")
			参照カードID = RESULT:1
			IF RESULT == 1 && 듀얼리스트 == "자신"
				;セットした카드가 조교可能なARG☆Sであればエロ조교を行う
				;듀얼리스트が자신의 時のみ処理する
				CALL CHARA_KIZUNA_59595(参照カードID,1680)
				アルゴ確認 = RESULT:1
				IF アルゴ確認 == 1
					CALL CARD_EROTICS(参照カードID,듀얼리스트)
					캐릭터番号 = RESULT
					
					;エロ조교の前の文章。カードごとで動きが若干異なる位置調整
					PRINTFORMW %CALLNAME:MASTER%는 대기실에서 워밍업하는 %CALLNAME:캐릭터番号%를 방문했다。
					PRINTL 
					
					;ここで조교の分岐処理に合流する。
					CALL ARGOSTARS_DUEL_TRAIN(듀얼리스트,参照カードID)
					
					;ここで캐릭터の조교状態に応じてセットしたカードに利用可能にする処理を行う
					CALL CARDID_TALENTCHECK(参照カードID)
					素質チェック = RESULT
					IF 素質チェック & 32 || 素質チェック & 64
						;[親愛]または[屈服済]の場合(32or64)、セットした카드를 そのターンに使用可能にする
						;参考：白銀城の狂時計
						CALL SET_FIELD_INFO(듀얼리스트,"마함",カード추가先,"表",2,1)
					ENDIF
				ENDIF
			ENDIF
		ELSE
			;10になったタイミングで묘지に送る효과를 適用しなかった場合、このカードは永久にフィールドに残り続ける処理になる。（BBSと同等）
			;このタイミングで、この카드가 この場所に存在する限り強制誘発が발동しないようにする。
			;汎数に1を설정。強制誘発の条件に汎数が1だとRETURN 0の記述をつける。
			CALL SET_FIELD_INFO(듀얼리스트,"마함",場所,"汎数",1)
		ENDIF
	ENDIF
ELSEIF 종류 == 攻守変動
	攻撃力修正 = GETVAR(@"%듀얼리스트%_魔_個Ｃ:場所") * 100
	CALL FULLRESET
	CALL STATCHANGE_BASIC(듀얼리스트,"필드",場所,攻撃力修正,攻撃力修正)
ELSEIF 종류 == 지속효과
	CALL SET_FIELD_MAGIC_INFO(듀얼리스트, "H.EroineStage")
	IF GETVAR(@"%듀얼리스트%_魔_個Ｃ:場所") >= 5
		;CALL FULLRESET
		;효과条件성별 = 牝性
		;효과条件カテゴリ = ARG☆S
		;CALL STATCHANGE_EFFECT(듀얼리스트,"필드",場所,"接可")
		CALL FULLRESET
		효과条件성별 = 牝性
효과条件カテゴリ = ARG☆S
		CALL STATCHANGE_EFFECT(듀얼리스트,"마함",場所,"接可",3)
	ENDIF
ENDIF
